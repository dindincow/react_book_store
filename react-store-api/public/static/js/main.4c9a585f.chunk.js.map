{"version":3,"sources":["store/actionType.js","commons/axios.js","Layout.js","store/actionCreator.js","component/ProductItem.js","component/Start.js","component/Header.js","component/UserProfile.js","pages/Login.js","pages/Cart.js","component/CartItem.js","commons/auth.js","component/Search.js","component/Products.js","component/AddProduct.js","component/EditProduct.js","component/PopupPanel.js","pages/App.js","pages/Register.js","pages/NotFound.js","Router.js","store/reducers.js","store/index.js","index.js"],"names":["CHANGE_INPUT_VALUE","INIT_LIST_ACTION","SEARCH_PRODUCT","OPEN_POPUP","CLOSE_POPUP","CHANGE_EDIT_BOOK_FILE","GET_CART_LIST","ADD_CART_ITEM","instance","axios","create","baseURL","process","timeout","Layout","props","user","useMemo","global","auth","getUser","className","children","changeInputValue","data","type","actionType","changeEditBookFile","payload","searchProduct","openPopup","closePopup","getProductList","dispatch","get","then","res","action","initListAction","addNewBook","product","post","toast","success","updateBook","put","id","deleteBook","delete","changeCartItemAmount","a","userId","carts","length","cart","mount","value","getCartList","deleteCartItem","addCart","item","console","log","parseInt","productId","name","image","price","email","ProductItem","renderProductBtn","content","status","onClick","renderEditBtn","this","available","unavailable","src","alt","author","rate","desc","Component","ProductItemData","withRouter","connect","actionCreator","isEdit","ItemData","isLogin","info","addCartData","Start","state","arr","map","ele","index","key","Header","renderAddBtn","goCart","history","push","closeUserProfile","setState","isUserProfileOpen","openUserProfile","nickname","isOpen","to","cartList","renderLink","nickName","UserProfile","close","logOut","logout","go","style","Login","useForm","register","handleSubmit","errors","onSubmit","password","jwtToken","setToken","error","response","message","ref","required","pattern","Carts","list","catrItem","totalPrice","reduce","getCartListData","CartItem","changeCartItem","sumPrice","cursor","width","min","onChange","e","filterList","target","JWT","getToken","localStorage","getItem","isTokenExpired","token","decode","exp","Date","now","setItem","removeItem","Search","inputValue","inputChange","placeholder","search","Products","TransitionGroup","component","CSSTransition","classNames","getProductInitList","AddProductPopup","handleChange","submit","preventDefault","createBook","tags","EditProduct","currentEditItem","book","PopupPanel","true","false","isPopupShow","AddProduct","App","Register","NotFound","Router","path","exact","Cart","defaultState","enhancer","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","applyMiddleware","thunk","store","createStore","newState","JSON","parse","stringify","filter","match","app","position","autoClose","hideProgressBar","newestOnTop","closeOnClick","rtl","pauseOnVisibilityChange","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.4c9a585f.chunk.js","sourcesContent":["export const  CHANGE_INPUT_VALUE= \"change_input_value\";\r\nexport const  INIT_LIST_ACTION = \"init_list_action\";\r\nexport const  SEARCH_PRODUCT = \"search_roduct\";\r\nexport const  OPEN_POPUP = \"open_popup\";\r\nexport const  CLOSE_POPUP = \"close_popup\";\r\nexport const  ADD_BOOK = \"add_book\";\r\nexport const  UPDATE_BOOK = \"update_book\";\r\nexport const  CHANGE_EDIT_BOOK_FILE = \"change_editor_book_file\";\r\nexport const  CHANGE_CART_ITEM_AMOUNT = \"change_cart_item_amount\";\r\nexport const  GET_CART_LIST = \"get_cart_list\";\r\nexport const  ADD_CART_ITEM = \"add_cart_item\";\r\n\r\n\r\n\r\n\r\n","import axios from 'axios';\r\n\r\nconst instance = axios.create({\r\n    baseURL: process.env.REACT_APP_API_DOMAIN ||'http://localhost:3003',\r\n    timeout: 1000,\r\n});\r\n\r\nexport default instance;","import React ,{useMemo} from 'react';\r\nimport Header from './component/Header'\r\n\r\nconst Layout = (props) =>{\r\n\r\n    const user = useMemo(()=>{\r\n        return global.auth.getUser() || {}\r\n    },[])\r\n\r\n    return(\r\n        <div className=\"main\">\r\n            <Header user={user}></Header>\r\n            {props.children}\r\n        </div>\r\n    )\r\n}\r\n\r\n\r\nexport default Layout;\r\n","import * as actionType from \"./actionType\";\r\nimport axios from '../commons/axios';\r\nimport { toast } from 'react-toastify';\r\n\r\n\r\nconst getCartsListData = (data)=>({  \r\n    type:actionType.GET_CART_LIST,\r\n    data\r\n}) \r\n\r\nexport const initListAction = (data)=>({\r\n    type:actionType.INIT_LIST_ACTION,\r\n    data\r\n})\r\n\r\nexport const changeInputValue = (data)=>({\r\n    type:actionType.CHANGE_INPUT_VALUE,\r\n    data\r\n})\r\n\r\nexport const changeEditBookFile = (payload)=>({\r\n    type:actionType.CHANGE_EDIT_BOOK_FILE,\r\n    payload\r\n})\r\n\r\nexport const searchProduct = ()=>({\r\n    type:actionType.SEARCH_PRODUCT,\r\n})\r\n\r\nexport const openPopup = (payload)=>({\r\n    type:actionType.OPEN_POPUP,\r\n    payload\r\n})\r\n\r\nexport const closePopup = ()=>({\r\n    type:actionType.CLOSE_POPUP,\r\n})\r\n\r\nexport const getProductList = ()=>{\r\n    return (dispatch)=>{\r\n        // axios.get('https://damp-garden-75366.herokuapp.com/products')\r\n        axios.get('/products')\r\n        .then((res)=>{\r\n            var data = res.data\r\n            const action = initListAction(data)\r\n            dispatch(action)\r\n        })\r\n    }\r\n}\r\n\r\nexport const addNewBook = (product)=>{\r\n    return (dispatch)=>{\r\n        axios.post('/products',product)\r\n        .then(res=>{\r\n            const action = getProductList()\r\n            dispatch(action)\r\n            toast.success('新增書籍成功!')\r\n        })\r\n    }\r\n}\r\n\r\n\r\nexport const updateBook= (product)=>{\r\n    return (dispatch)=>{\r\n\r\n        axios.put(`/products/${product.id}`,product)\r\n        .then(res=>{\r\n            const action = getProductList()\r\n            dispatch(action)\r\n            toast.success('編輯書籍成功!')\r\n        })\r\n    }\r\n}\r\n\r\nexport const deleteBook= (id)=>{\r\n    return (dispatch)=>{\r\n\r\n        axios.delete(`/products/${id}`)\r\n        .then(res=>{\r\n            const action = getProductList()\r\n            dispatch(action)\r\n            toast.success('刪除書籍成功!')\r\n        })\r\n    }\r\n}\r\n\r\n\r\nexport const changeCartItemAmount = (payload)=>{\r\n\r\n    return async(dispatch)=>{\r\n       \r\n        const res = await axios.get(`/carts?userId=${payload.userId}&&productId=${payload.id}`);\r\n        const carts = res.data;\r\n\r\n        if (carts && carts.length > 0) {\r\n            const cart = carts[0];\r\n            cart.mount = payload.value;\r\n            await axios.put(`/carts/${cart.id}`, cart);\r\n        }\r\n        dispatch(getCartList(payload))\r\n      \r\n    }\r\n}\r\n\r\n\r\nexport const deleteCartItem = (payload)=>{\r\n  \r\n    return (dispatch)=>{\r\n        axios.delete(`/carts/${payload.id}`).then( res=>{\r\n            dispatch(getCartList(payload))\r\n        })\r\n    }\r\n}\r\n\r\n\r\nexport const addCart = (item)=>{  \r\n\r\n    console.log(\"item==>\",item)\r\n\r\n    return async(dispatch)=>{\r\n\r\n\r\n        // 先找出該用戶購物車是否有該商品\r\n        const res = await axios.get(`/carts?userId=${item.userId}&&productId=${item.id}`);\r\n        const carts = res.data;\r\n        console.log('carts',carts)\r\n    \r\n        // 如果有該商品，則購物車數量加1\r\n        if (carts && carts.length > 0) {\r\n           \r\n            const cart = carts[0];\r\n            cart.mount = parseInt(cart.mount)+1;\r\n            await axios.put(`/carts/${cart.id}`, cart);\r\n\r\n        } else { \r\n            const cart = {\r\n                productId:item.id,\r\n                name:item.name,\r\n                image:item.image,\r\n                price:item.price,\r\n                mount: 1,\r\n                userId:item.userId\r\n            };\r\n            await axios.post('/carts', cart);\r\n        }\r\n\r\n        const action = getCartList(item);\r\n        dispatch(action);\r\n        toast.success('增加到購物車!')\r\n    }\r\n\r\n}\r\n\r\n// 獲取購物車清單\r\nexport const getCartList = (user)=>{  \r\n\r\n    let id = user.email || user.userId;\r\n    console.log(\"id\",id)\r\n  \r\n    return (dispatch)=>{\r\n        axios.get(`/carts?userId=${id}`)\r\n        .then(res=>{\r\n            console.log(\"getCartList\",res.data)\r\n            const action = getCartsListData(res.data)\r\n            dispatch(action) \r\n        })\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","import React ,{Component}from 'react';\r\nimport { connect } from 'react-redux';\r\nimport {withRouter} from \"react-router-dom\";\r\nimport  * as actionCreator  from '../store/actionCreator';\r\nimport Start from './Start';\r\nimport { toast } from 'react-toastify';\r\n\r\n\r\n\r\nclass ProductItem extends Component{\r\n\r\n   \r\n    renderProductBtn = (content) =>{\r\n        const {addCart} = this.props;\r\n\r\n        if(content.status===\"available\" ){\r\n            return (\r\n                <span className=\"buyBtn\" onClick={()=>{addCart(content)}}>\r\n                    <i className=\"fas fa-cart-plus\"></i>\r\n                </span>\r\n            )\r\n        }else{\r\n            return <span className=\"sold-out-text\">以販售完</span>\r\n        }  \r\n    }\r\n\r\n    renderEditBtn = () =>{\r\n\r\n        const {openPopup} = this.props;\r\n\r\n        const user = global.auth.getUser() || {};\r\n        console.log('user',user)\r\n\r\n        if(user.type===1){\r\n            return <button type=\"button\" className=\"editBtn\" onClick={()=>{openPopup(this.props.content)}}><i className=\"fas fa-edit\"></i></button>\r\n        }else{\r\n            return ''\r\n        }\r\n    }\r\n\r\n\r\n    render(){\r\n        const {content} = this.props;\r\n\r\n        const isProductSold ={\r\n            available:'sold-out hide',\r\n            unavailable:'sold-out'\r\n        }\r\n\r\n        return(\r\n            <div className=\"productItem\">\r\n                <div className=\"box\">\r\n                    <article className=\"media\">\r\n                        <div className=\"media-left\">\r\n                           \r\n                            <figure className=\"image\">\r\n                                <div className={isProductSold[content.status]}>\r\n                                    <i className=\"fas fa-sad-tear\"></i><br/>SOLD-OUT\r\n                                </div>\r\n                                <img src={content.image} alt={content.name}/>\r\n                            </figure>\r\n                        </div>\r\n                        <div className=\"bookInfo\">\r\n                            {this.renderEditBtn()}\r\n                            <ul>\r\n\r\n                                <li className=\"name\">{content.name}</li>\r\n                                <li className=\"author\">{content.author}</li>\r\n                                <li className=\"rate\">\r\n                                    <Start rate={content.rate}></Start>\r\n                                </li>\r\n                                <li className=\"desc\">{content.desc}</li>\r\n                               \r\n                                <a className=\"price\">\r\n                                    <span> NT.{content.price} </span>\r\n                                    {this.renderProductBtn(content)}\r\n                                </a>\r\n                            </ul>\r\n                        </div>\r\n                    </article>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) =>{\r\n   \r\n    return{\r\n        openPopup(item){\r\n            const action = actionCreator.openPopup({\r\n                isEdit:true,\r\n                ItemData : item\r\n            });\r\n            dispatch(action);\r\n        },\r\n\r\n        addCart(item){\r\n            // 如果沒有登入，導回登入頁\r\n            if(!global.auth.isLogin()){\r\n                toast.info(\"請先登入!\")\r\n                return false;\r\n            }\r\n            const user = global.auth.getUser() || {};\r\n            const { id, name, image, price } = item;\r\n\r\n            const addCartData = {\r\n                id,\r\n                name,\r\n                image,\r\n                price,\r\n                userId:user.email\r\n            }\r\n\r\n            const action = actionCreator.addCart(addCartData);\r\n            dispatch(action);\r\n        },\r\n \r\n    }\r\n}\r\n\r\n\r\n\r\n\r\n// export default connect(null,mapDispatchToProps)(ProductItem);\r\n\r\nconst ProductItemData = withRouter(connect(null,mapDispatchToProps)(ProductItem));\r\nexport default ProductItemData\r\n\r\n\r\n","import React, { Component } from 'react';\r\n\r\nclass Start extends Component {\r\n\r\n    constructor(props) {\r\n        super(props)\r\n        this.state={\r\n            arr:[1,2,3,4,5]\r\n        }\r\n    }\r\n\r\n    render(){\r\n\r\n        return(\r\n            <span>\r\n                {\r\n                    this.state.arr.map((ele,index)=>{\r\n                        return(\r\n                            <span key={index}>\r\n                                { ele <= this.props.rate ? <i className=\"fas fa-star\"></i> :<i className=\"far fa-star\"></i>}\r\n                            </span>\r\n                        )\r\n                    })\r\n                }\r\n            </span>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Start;\r\n","import React, { Component, Fragment } from 'react';\r\nimport {Link} from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport UserProfile from './UserProfile';\r\nimport * as actionCreator from '../store/actionCreator'\r\n\r\n\r\nclass Header extends Component {\r\n\r\n    constructor(props){\r\n        super(props);\r\n        this.state={\r\n            isUserProfileOpen:false\r\n        }\r\n    }\r\n\r\n    renderLink() {\r\n        const { nickname,email,type } = this.props.user;\r\n        console.log('this.props.user',this.props.user)\r\n        \r\n        if (nickname) {\r\n            return (\r\n                <div className=\"userInfoWrapper\">\r\n                    <span className=\"userName\" onClick={this.openUserProfile}><i className=\"fas fa-user-circle\"></i>{nickname}</span>\r\n                    <UserProfile \r\n                        type ={type}\r\n                        nickname={nickname} \r\n                        email={email} \r\n                     \r\n                        isOpen={this.state.isUserProfileOpen}\r\n                        closeUserProfile = {this.closeUserProfile}\r\n                        > \r\n                    </UserProfile>\r\n                    <Link to=\"/cart\"><i className=\"fas fa-cart-plus\"></i>({this.props.cartList.length})</Link>\r\n                </div>\r\n            )\r\n\r\n        } else {\r\n            return (\r\n                <Fragment>\r\n                    <Link to=\"/register\">註冊</Link>\r\n                    <Link to=\"/login\">登入</Link>\r\n                </Fragment>\r\n            )\r\n        }\r\n    }\r\n\r\n    renderAddBtn = ()=>{\r\n        const {openPopup } = this.props;\r\n        const user = global.auth.getUser() || {};\r\n        if(user.type===1){\r\n            return  <button className=\"button addBook is-info\" onClick={openPopup}>增加書集</button>\r\n        }\r\n    }\r\n\r\n    render() {\r\n        \r\n        return (\r\n            <div className=\"header\">\r\n                <div className=\"container\">\r\n                    <nav className=\"level\">\r\n                        <div className=\"level-left\">\r\n                            <Link to=\"/\" className=\"logo\">BOOK STORE</Link>\r\n                        </div>\r\n                        <div className=\"level-right\">\r\n                            {this.renderLink()}\r\n                            {this.renderAddBtn()}\r\n                        </div>\r\n                    </nav>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n\r\n\r\n    componentDidMount() {\r\n        this.props.getCartList()\r\n    }\r\n\r\n    goCart = () => {\r\n        this.props.history.push('/cart')\r\n    }\r\n\r\n    closeUserProfile = ()=>{\r\n        this.setState({\r\n            isUserProfileOpen:false\r\n        })\r\n    }\r\n\r\n    openUserProfile = ()=>{\r\n        this.setState({\r\n            isUserProfileOpen:true\r\n        })\r\n    }\r\n\r\n\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        cartList: state.cartList,\r\n        nickName: state.nickName\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        openPopup() {\r\n            const action = actionCreator.openPopup({ isEdit: false });\r\n            dispatch(action);\r\n        },\r\n        getCartList() {\r\n            const user = global.auth.getUser() || {};\r\n            dispatch(actionCreator.getCartList(user));\r\n        }\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Header);\r\n","import React, { Component } from 'react';\r\nimport {withRouter} from \"react-router-dom\";\r\n\r\nclass UserProfile extends Component {\r\n\r\n    render() {\r\n        const style = this.props.isOpen ? 'user-profile': 'user-profile-hide';\r\n\r\n        return (\r\n            <div className={style}>\r\n                <p>{this.props.nickname}</p>\r\n                <p>{this.props.email}</p>\r\n                <p>{this.props.type === 1 ? '管理員' :'ㄧ般用戶'}</p>\r\n                <div className=\"user-profile-btn-box\">\r\n                    <button className=\"button is-small\" type=\"button\" onClick={this.close}>關閉</button>\r\n                    <button className=\"button is-info is-small\" type=\"button\" onClick={this.logOut}>登出</button>\r\n                </div>\r\n               \r\n            </div>\r\n        );\r\n\r\n    }\r\n\r\n    close = () =>{\r\n        this.props.closeUserProfile();\r\n    }\r\n\r\n    logOut = ()=>{\r\n        this.props.closeUserProfile();\r\n        global.auth.logout();\r\n        this.props.history.push(\"/login\");\r\n        this.props.history.go(0);\r\n       \r\n    }\r\n\r\n   \r\n}\r\n\r\nexport default withRouter(UserProfile);\r\n","import React from 'react';\r\nimport axios from '../commons/axios';\r\nimport useForm from 'react-hook-form';\r\nimport { toast } from 'react-toastify';\r\n\r\nexport default function Login(props) {\r\n\r\n    const { register, handleSubmit, errors } = useForm();\r\n\r\n    const onSubmit = async data => {\r\n\r\n        console.log('data')\r\n    \r\n        try{\r\n            const {email,password} = data;\r\n            const res = await axios.post('/auth/login',{email,password});\r\n            const jwtToken = res.data;\r\n            console.log('jwtToken',jwtToken)\r\n\r\n            // 設定 token\r\n            global.auth.setToken(jwtToken);\r\n            toast.success('登入成功!')\r\n            props.history.push('/')\r\n\r\n        }catch(error){\r\n            toast.error(error.response.data.message)\r\n            console.log('error==>',error.response.data)\r\n        }\r\n\r\n    \r\n    }\r\n\r\n    return (\r\n        <div className=\"login-wrapper\">\r\n            <i className=\"bookicon fas fa-journal-whills\"></i>\r\n            <h3>布克萊後台管理</h3>\r\n            <form className=\"box login-box\" onSubmit={handleSubmit(onSubmit)}>\r\n                <div className=\"field\">\r\n                    <label className=\"label\">Email</label>\r\n                    <div className=\"control\">\r\n                        <input\r\n                            className={`input ${errors.email && 'is-danger'}`}\r\n                            type=\"text\"\r\n                            name=\"email\"\r\n                            ref={register({ \r\n                                required: 'email不可為空!',\r\n                                pattern: {\r\n                                    value: /^([\\w-_]+(?:\\.[\\w-_]+)*)@((?:[a-z0-9]+(?:-[a-zA-Z0-9]+)*)+\\.[a-z]{2,6})$/i,\r\n                                    message: 'email 格式不正確!'\r\n                                } \r\n                            })}\r\n                        />\r\n                        {\r\n                            errors.email && (\r\n                                <p className=\"helper has-text-danger\">{errors.email.message}</p>\r\n                            )\r\n                        }\r\n                    </div>\r\n                </div>\r\n                <div className=\"field\">\r\n                    <label className=\"label\">Password</label>\r\n                    <div className=\"control\">\r\n                        <input\r\n                            className={`input ${errors.password && 'is-danger'}`}\r\n                            type=\"text\"\r\n                            name=\"password\"\r\n                            ref={register({ required: true })}\r\n                        />\r\n                    </div>\r\n                    {\r\n                        errors.password && (\r\n                            <p className=\"helper has-text-danger\">password 不可為空</p>\r\n                        )\r\n                    }\r\n                </div>\r\n\r\n                <div className=\"control\">\r\n                    <button className=\"button is-fullwidth is-primary\">Login</button>\r\n                </div>\r\n\r\n            </form>\r\n        </div>\r\n    )\r\n}\r\n\r\n\r\n","import React, { Component } from 'react';\r\nimport CartItem from '../component/CartItem';\r\nimport * as actionCreator from '../store/actionCreator';\r\nimport {connect} from 'react-redux';\r\nimport Layout from '../Layout';\r\n\r\nclass Carts extends Component {\r\n    render() {\r\n        const {list} = this.props;\r\n        const totalPrice = () =>{\r\n            const totalPrice = list.map(cart => cart.mount * parseInt(cart.price))\r\n            .reduce((a,value) => a + value,0);\r\n            return totalPrice;\r\n        } \r\n\r\n        return (\r\n            <Layout>\r\n                <div className=\"cart-page\">\r\n                    <span className=\"cart-title\">您的購物清單</span>\r\n                        <table className=\"table cart-list\">\r\n                            <thead>\r\n                                <tr>\r\n                                    <th>刪除</th>\r\n                                    <th>圖片</th>\r\n                                    <th>書名</th>\r\n                                    <th>價錢</th>\r\n                                    <th>數量</th>\r\n                                    <th>總價</th>\r\n                                </tr>\r\n                            </thead>\r\n                            <tbody>\r\n                                { \r\n                                    list.map(item=>{\r\n                                        return  <CartItem catrItem={item} key={item.id}></CartItem>\r\n                                    })\r\n                                }\r\n                            </tbody>    \r\n                        </table>\r\n                   \r\n                    <div className=\"cart-total\">\r\n                        Total:\r\n                        <span className=\"total-price\">$ {totalPrice()}</span>\r\n                    </div>\r\n                </div>\r\n    \r\n            </Layout>\r\n        )\r\n    }\r\n    componentDidMount(){\r\n        this.props.getCartListData()\r\n    }\r\n\r\n}\r\n\r\nconst mapState = (state)=>({\r\n    list:state.cartList\r\n})\r\n\r\nconst mapDispatch = (dispatch)=>({\r\n    getCartListData(){\r\n        const user = global.auth.getUser() || {};\r\n        dispatch(actionCreator.getCartList(user))\r\n    }\r\n})\r\nexport default connect(mapState,mapDispatch)(Carts);","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport  * as actionCreator  from '../store/actionCreator';\r\n\r\nclass CartItem extends Component {\r\n    render() {\r\n        const {catrItem,changeCartItem,deleteCartItem}  =   this.props;\r\n        const sumPrice = catrItem.mount*parseInt(catrItem.price)\r\n        return (\r\n            <tr>\r\n                <td><span style={{cursor: \"pointer\"}} onClick={()=>{deleteCartItem(catrItem.id)}}><i className=\"far fa-trash-alt\"></i></span></td>\r\n                <td> <img src={catrItem.image} alt={catrItem.name} width=\"100\" /></td>\r\n                <td>{catrItem.name}</td>\r\n                <td>$ {catrItem.price}</td>\r\n                <td> \r\n                    <input\r\n                        type=\"number\"\r\n                        value={catrItem.mount}\r\n                        min={1}\r\n                        name=\"amount\"\r\n                        onChange={(e)=>{ changeCartItem (e,catrItem.productId) }}\r\n                    /></td>\r\n                <td><span className=\"sum-price\">$ {sumPrice}</span></td>\r\n            </tr>\r\n        )\r\n    }\r\n\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        list: state.filterList\r\n    }\r\n}\r\n\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        changeCartItem(e,id){\r\n            const user = global.auth.getUser() || {};\r\n            const payload = {\r\n                name : e.target.name,\r\n                value: e.target.value,\r\n                id,\r\n                userId:user.email\r\n            }\r\n            dispatch(actionCreator.changeCartItemAmount(payload));\r\n        },\r\n        deleteCartItem(id){\r\n           \r\n            const user = global.auth.getUser() || {};\r\n            const payload = {\r\n                id,\r\n                userId:user.email\r\n            }\r\n            dispatch(actionCreator.deleteCartItem(payload));\r\n        }\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(CartItem);\r\n","import decode from 'jwt-decode'\r\n\r\nconst JWT = 'store_token_id';\r\n\r\nconst setToken = (token)=>{\r\n   localStorage.setItem(JWT,token) ;\r\n}\r\n\r\nconst getToken = ()=>{\r\n    return localStorage.getItem(JWT) ;\r\n}\r\n\r\nconst isLogin = ()=>{\r\n    const jwtToken = getToken();\r\n    return !!jwtToken && !isTokenExpired(jwtToken);\r\n}\r\n\r\nconst isTokenExpired = (token) =>{\r\n    try{\r\n        const info = decode(token);\r\n        if( info.exp < Date.now()/1000){\r\n            return true;\r\n        }else{\r\n            return false;\r\n        }\r\n    }catch{\r\n        return false;\r\n    }\r\n}\r\n\r\nconst getUser = ()=>{\r\n    const jwtToken = getToken();\r\n\r\n    if(isLogin()){\r\n        const user = decode(jwtToken);\r\n        return user;\r\n    }else{\r\n        return null;\r\n    }\r\n\r\n}\r\n\r\n\r\nconst logout = ()=>{\r\n    localStorage.removeItem(JWT)\r\n}\r\n \r\nglobal.auth={\r\n    setToken,\r\n    getUser,\r\n    logout,\r\n    isLogin\r\n}","import React , {Component} from 'react';\r\nimport { connect } from 'react-redux';\r\nimport  * as actionCreator  from '../store/actionCreator';\r\n\r\nclass Search extends Component{\r\n\r\n    render(){\r\n        return(\r\n            <div className=\"search\">\r\n                <div className=\"container\">\r\n                    <h2>Read More  x  Life More</h2>\r\n                    <h5>挑 選 一 本 好 書 ， 享 受 閱 讀 喜 悅</h5>\r\n                    <div className=\"field has-addons searchInput\">\r\n                        <div className=\"control\">\r\n                            <input  \r\n                                className=\"input\"\r\n                                type=\"text\"  \r\n                                value = {this.props.inputValue}\r\n                                onChange = {this.props.inputChange}\r\n                                placeholder=\"搜尋書集\"/>\r\n                        </div>\r\n                        <div className=\"control\">\r\n                            <a className=\"button\" onClick={this.props.search}><i className=\"fas fa-search\"></i></a>\r\n                        </div>\r\n                     </div>\r\n                   \r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\n\r\nconst mapStateToProps = (state)=>{\r\n    return{\r\n        inputValue :state.inputValue\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) =>{\r\n    return{\r\n        inputChange(e){\r\n            const action = actionCreator.changeInputValue(e.target.value);\r\n            dispatch(action);\r\n        },\r\n\r\n        search(){\r\n            const action = actionCreator.searchProduct();\r\n            dispatch(action);\r\n        }\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps,mapDispatchToProps)(Search);","import React ,{Component}from 'react';\r\nimport ProductItem from './ProductItem';\r\nimport { connect } from 'react-redux';\r\nimport { CSSTransition,TransitionGroup } from 'react-transition-group';\r\nimport  * as actionCreator  from '../store/actionCreator';\r\n\r\nclass Products extends Component{\r\n\r\n    render(){\r\n        return(\r\n            <div className=\"Products\">\r\n                <div className=\"container\">\r\n                    <div className=\"columns is-desktop is-multiline\">\r\n                        <TransitionGroup component={null}>\r\n                        {\r\n                            this.props.list.map(item => {\r\n                                return (\r\n                                    <CSSTransition classNames=\"product-fade\" timeout={300} key={item.id}>\r\n                                        <div className=\"column is-4\" key={item.id}>\r\n                                            <ProductItem content = {item} />\r\n                                        </div>\r\n                                    </CSSTransition>\r\n                                )\r\n                            })\r\n                        }\r\n                        </TransitionGroup>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    componentDidMount(){\r\n        this.props.getProductInitList()\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state)=>{\r\n    return{\r\n        list : state.filterList\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) =>{\r\n    return{\r\n        getProductInitList(){\r\n            const action = actionCreator.getProductList();\r\n            dispatch(action);\r\n        }\r\n    }\r\n}\r\n\r\n\r\nexport default connect(mapStateToProps,mapDispatchToProps)(Products);","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport  * as actionCreator  from '../store/actionCreator';\r\n\r\nclass AddProductPopup extends Component {\r\n\r\n    constructor(props){\r\n        super(props);\r\n        this.state={\r\n            name:'',\r\n            author:'',\r\n            rate:'',\r\n            desc:'',\r\n            price:'',\r\n            tags:'',\r\n            image:'',\r\n            status:'available'\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"addProductPopup\">\r\n                <p className=\"title has-text-centered\">新增書籍</p>\r\n                <form onSubmit={this.submit}>\r\n                    <div className=\"field\">\r\n                        <div className=\"control\">\r\n                            <label className=\"label\">書籍名稱</label>\r\n                            <input\r\n                                type=\"text\"\r\n                                className=\"input\"\r\n                                name=\"name\"\r\n                                value={this.state.name}\r\n                                onChange = {this.handleChange}\r\n                            />\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"field\">\r\n                        <div className=\"control\">\r\n                            <label className=\"label\">書籍作者</label>\r\n                            <input\r\n                                type=\"text\"\r\n                                className=\"input\"\r\n                                name=\"author\"\r\n                                value={this.state.author}\r\n                                onChange = {this.handleChange}\r\n                            />\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"field\">\r\n                        <div className=\"control\">\r\n                            <label className=\"label\">書籍評分</label>\r\n                            <input\r\n                                type=\"text\"\r\n                                className=\"input\"\r\n                                name=\"rate\"\r\n                                value={this.state.rate}\r\n                                onChange = {this.handleChange}\r\n                            />\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"field\">\r\n                        <div className=\"control\">\r\n                            <label className=\"label\">書籍描述</label>\r\n                            <textarea\r\n                                className=\"textarea\"\r\n                                name=\"desc\"\r\n                                value={this.state.desc}\r\n                                onChange = {this.handleChange}\r\n                            />\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"field\">\r\n                        <div className=\"control\">\r\n                            <label className=\"label\">書籍價格</label>\r\n                            <input\r\n                                type=\"number\"\r\n                                className=\"input\"\r\n                                name=\"price\"\r\n                                value={this.state.price}\r\n                                onChange = {this.handleChange}\r\n                            />\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"field\">\r\n                        <div className=\"control\">\r\n                            <label className=\"label\">書籍圖片</label>\r\n                            <input\r\n                                type=\"text\"\r\n                                className=\"input\"\r\n                                name=\"image\"\r\n                                value={this.state.image}\r\n                                onChange = {this.handleChange}\r\n                            />\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"field\">\r\n                        <div className=\"control\">\r\n                            <label className=\"label\">書籍狀態</label>\r\n                            <div className=\"select is-fullwidth\">\r\n                                <select\r\n                                    name=\"status\"\r\n                                    value=\"available\"\r\n                                    onChange = {this.handleChange}\r\n                                >\r\n                                    <option>available</option>\r\n                                    <option>unavailable</option>\r\n                                </select>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <br />\r\n                    <div className=\"field is-grouped is-grouped-centered\">\r\n                        <div className=\"control\">\r\n                            <button className=\"button is-info\">提交</button>\r\n                        </div>\r\n                        <div className=\"control\">\r\n                            <button\r\n                                className=\"button\"\r\n                                type=\"button\"\r\n                                onClick={this.closePopup}\r\n                            >\r\n                                取消\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                </form>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    handleChange = e =>{\r\n        const name = e.target.name;\r\n        const value = e.target.value;\r\n        \r\n        this.setState({\r\n            [name] :value\r\n        })\r\n    }\r\n\r\n    submit = (e)=>{\r\n        e.preventDefault();\r\n        const product = {...this.state};\r\n        this.props.createBook(product);\r\n        this.props.closePopup(); \r\n\r\n        this.setState({\r\n            name:'',\r\n            author:'',\r\n            rate:'',\r\n            desc:'',\r\n            price:'',\r\n            tags:'',\r\n            image:'',\r\n            status:'available'\r\n        })\r\n    }\r\n\r\n    closePopup = ()=>{\r\n        this.setState({\r\n            name:'',\r\n            author:'',\r\n            rate:'',\r\n            desc:'',\r\n            price:'',\r\n            tags:'',\r\n            image:'',\r\n            status:'available'\r\n        })\r\n        this.props.closePopup()\r\n    }\r\n}\r\n\r\n\r\nconst mapDispatchToProps = (dispatch) =>{\r\n    return{\r\n        createBook(product){\r\n            const action = actionCreator.addNewBook(product);\r\n            dispatch(action);\r\n        },\r\n        closePopup(){\r\n            const action = actionCreator.closePopup()\r\n            dispatch(action)\r\n        }\r\n    }\r\n}\r\n\r\nexport default connect(null,mapDispatchToProps)(AddProductPopup);\r\n\r\n","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport  * as actionCreator  from '../store/actionCreator';\r\n\r\nclass EditProduct extends Component {\r\n\r\n    render() {\r\n        const { author, desc, id, image, name, price, rate, status } = this.props.currentEditItem;\r\n        return (\r\n            <div className=\"addProductPopup\">\r\n                <p className=\"title has-text-centered\">修改商品</p>\r\n                <form>\r\n                    <div className=\"field\">\r\n                        <div className=\"control\">\r\n                            <label className=\"label\">書籍名稱</label>\r\n                            <input\r\n                                type=\"text\"\r\n                                className=\"input\"\r\n                                name=\"name\"\r\n                                value={name}\r\n                                onChange={this.props.handleChange}\r\n                            />\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"field\">\r\n                        <div className=\"control\">\r\n                            <label className=\"label\">書籍作者</label>\r\n                            <input\r\n                                type=\"text\"\r\n                                className=\"input\"\r\n                                name=\"author\"\r\n                                value={author}\r\n                                onChange={this.props.handleChange}\r\n                            />\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"field\">\r\n                        <div className=\"control\">\r\n                            <label className=\"label\">書籍評分</label>\r\n                            <input\r\n                                type=\"text\"\r\n                                className=\"input\"\r\n                                name=\"rate\"\r\n                                value={rate}\r\n                                onChange={this.props.handleChange}\r\n                            />\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"field\">\r\n                        <div className=\"control\">\r\n                            <label className=\"label\">書籍描述</label>\r\n                            <textarea\r\n                                className=\"textarea\"\r\n                                name=\"desc\"\r\n                                value={desc}\r\n                                onChange={this.props.handleChange}\r\n                            />\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"field\">\r\n                        <div className=\"control\">\r\n                            <label className=\"label\">書籍價格</label>\r\n                            <input\r\n                                type=\"number\"\r\n                                className=\"input\"\r\n                                name=\"price\"\r\n                                value={price}\r\n                                onChange={this.props.handleChange}\r\n                            />\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"field\">\r\n                        <div className=\"control\">\r\n                            <label className=\"label\">書籍圖片</label>\r\n                            <input\r\n                                type=\"text\"\r\n                                className=\"input\"\r\n                                name=\"image\"\r\n                                value={image}\r\n                                onChange={this.props.handleChange}\r\n                            />\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"field\">\r\n                        <div className=\"control\">\r\n                            <label className=\"label\">書籍狀態</label>\r\n                            <div className=\"select is-fullwidth\">\r\n                                <select\r\n                                    name=\"status\"\r\n                                    value={status}\r\n                                    onChange={this.props.handleChange}\r\n                                >\r\n                                    <option>available</option>\r\n                                    <option>unavailable</option>\r\n                                </select>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <br />\r\n                    <div className=\"field is-grouped is-grouped-centered\">\r\n                        <div className=\"control\">\r\n                            <button className=\"button is-danger\" type=\"button\" onClick={() => { this.props.deleteBook(id) }}>刪除</button>\r\n                        </div>\r\n                        <div className=\"control\">\r\n                            <button className=\"button is-info\"\r\n                                type=\"button\"\r\n                                onClick={() => this.props.updateBook(this.props.currentEditItem)}>提交\r\n                                </button>\r\n                        </div>\r\n                        <div className=\"control\">\r\n                            <button\r\n                                className=\"button\"\r\n                                type=\"button\"\r\n                                onClick={this.props.closePopup}\r\n                            >\r\n                                取消\r\n                                </button>\r\n                        </div>\r\n                    </div>\r\n                </form>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        currentEditItem: state.currentEditItem\r\n    }\r\n}\r\n\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        handleChange(e) {\r\n            const payload = {\r\n                name: e.target.name,\r\n                value: e.target.value\r\n            }\r\n            const action = actionCreator.changeEditBookFile(payload)\r\n            dispatch(action);\r\n        },\r\n\r\n        updateBook(book) {\r\n            const action = actionCreator.updateBook(book);\r\n            dispatch(action);\r\n            this.closePopup();\r\n        },\r\n\r\n        closePopup() {\r\n            const action = actionCreator.closePopup();\r\n            dispatch(action);\r\n        },\r\n\r\n        deleteBook(id) {\r\n            const action = actionCreator.deleteBook(id);\r\n            dispatch(action);\r\n            this.closePopup();\r\n        }\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(EditProduct);\r\n","import React ,{Component}from 'react';\r\nimport AddProduct from './AddProduct';\r\nimport EditProduct from './EditProduct';\r\nimport { connect } from 'react-redux';\r\nimport * as actionCreator from '../store/actionCreator'\r\n\r\nclass PopupPanel extends Component{\r\n    \r\n    render(){\r\n        const isOpen= {\r\n            true:'panel-wrapper active',\r\n            false:'panel-wrapper'\r\n        }\r\n\r\n        return(\r\n            <div className={isOpen[this.props.isPopupShow]}>\r\n                <div className=\"over-layer\"></div>\r\n                <div className=\"panel\">\r\n                   <div className=\"head\">\r\n                        <span onClick={this.props.closePopup}>\r\n                            <i className=\"far fa-times-circle\"></i>\r\n                        </span>\r\n                    </div>\r\n                    { this.props.isEdit ?  <EditProduct/> : <AddProduct/>}\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state)=>{\r\n    return{\r\n        isPopupShow : state.isPopupShow,\r\n        isEdit :state.isEdit\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) =>{\r\n    return{\r\n        closePopup(){\r\n            const action = actionCreator.closePopup();\r\n            dispatch(action)\r\n        }\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps,mapDispatchToProps)(PopupPanel);\r\n","import React ,{Component}from 'react';\r\nimport Search from '../component/Search';\r\nimport Products from '../component/Products';\r\nimport PopupPanel from '../component/PopupPanel';\r\nimport Layout from '../Layout';\r\n\r\nclass App extends Component{\r\n    render(){\r\n        return(\r\n            <Layout>\r\n        \r\n                <Search/>\r\n                <Products/>\r\n                <PopupPanel/>\r\n       \r\n            </Layout>\r\n        )\r\n    }\r\n}\r\n\r\nexport default App;","import React from 'react';\r\nimport axios from '../commons/axios';\r\nimport useForm from 'react-hook-form';\r\nimport { toast } from 'react-toastify';\r\n\r\nexport default function Register(props) {\r\n\r\n    const { register, handleSubmit, errors } = useForm();\r\n\r\n    const onSubmit = async data => {\r\n\r\n        console.log('data', data)\r\n\r\n        try {\r\n            const { email, password, type, nickname } = data;\r\n            await axios.post('/auth/register', { email, password, type, nickname });\r\n            toast.success('註冊成功!')\r\n            props.history.push('/login')\r\n\r\n        } catch (error) {\r\n            toast.error(error.response.data.message)\r\n            console.log('error==>', error.response.data)\r\n        }\r\n\r\n\r\n    }\r\n\r\n    return (\r\n        <div className=\"login-wrapper\">\r\n            <i className=\"bookicon fas fa-journal-whills\"></i>\r\n            <h3>布克萊後台管理-註冊</h3>\r\n            <form className=\"box login-box\" onSubmit={handleSubmit(onSubmit)}>\r\n                <div className=\"field\">\r\n                    <label className=\"label\">暱稱</label>\r\n                    <div className=\"control\">\r\n                        <input\r\n                            className={`input ${errors.nickname && 'is-danger'}`}\r\n                            type=\"text\"\r\n                            name=\"nickname\"\r\n                            ref={register({\r\n                                required: '暱稱不可為空'\r\n                            })}\r\n                        />\r\n                        {errors.nickname && (\r\n                            <p className=\"helper has-text-danger\">\r\n                                {errors.nickname.message}\r\n                            </p>\r\n                        )}\r\n                    </div>\r\n                </div>\r\n                <div className=\"field\">\r\n                    <label className=\"label\">Email</label>\r\n                    <div className=\"control\">\r\n                        <input\r\n                            className={`input ${errors.email && 'is-danger'}`}\r\n                            type=\"text\"\r\n                            name=\"email\"\r\n                            ref={register({\r\n                                required: 'email不可為空!',\r\n                                pattern: {\r\n                                    value: /^([\\w-_]+(?:\\.[\\w-_]+)*)@((?:[a-z0-9]+(?:-[a-zA-Z0-9]+)*)+\\.[a-z]{2,6})$/i,\r\n                                    message: 'email 格式不正確!'\r\n                                }\r\n                            })}\r\n                        />\r\n                        {\r\n                            errors.email && (\r\n                                <p className=\"helper has-text-danger\">{errors.email.message}</p>\r\n                            )\r\n                        }\r\n                    </div>\r\n                </div>\r\n                <div className=\"field\">\r\n                    <label className=\"label\">Password</label>\r\n                    <div className=\"control\">\r\n                        <input\r\n                            className={`input ${errors.password && 'is-danger'}`}\r\n                            type=\"text\"\r\n                            name=\"password\"\r\n                            ref={register({ required: true })}\r\n                        />\r\n                    </div>\r\n                    {\r\n                        errors.password && (\r\n                            <p className=\"helper has-text-danger\">password 不可為空</p>\r\n                        )\r\n                    }\r\n                </div>\r\n\r\n                <div className=\"field\">\r\n                    <label className=\"label\">類型</label>\r\n                    <div className=\"select\">\r\n                        <select name=\"type\" ref={register({ required: true })}>\r\n\r\n                            <option value=\"0\">ㄧ般會員</option>\r\n                            <option value=\"1\">管理員</option>\r\n                        </select>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"control\">\r\n                    <button className=\"button is-fullwidth is-primary\">註冊</button>\r\n                </div>\r\n\r\n            </form>\r\n        </div>\r\n    )\r\n}\r\n\r\n\r\n","import React from 'react';\r\n\r\nconst NotFound = () =>(\r\n    <div className=\"not-found\">\r\n        <h2>NOT-FOUND</h2>\r\n    </div>\r\n)\r\n\r\nexport default  NotFound;","import React from 'react';\r\nimport { BrowserRouter, Switch, Route } from 'react-router-dom';\r\nimport App from './pages/App';\r\nimport Login from './pages/Login';\r\nimport Cart from './pages/Cart';\r\nimport Register from './pages/Register';\r\nimport NotFound from './pages/NotFound';\r\n\r\nconst Router = () => (\r\n    <BrowserRouter>\r\n        <Switch>\r\n            <Route path=\"/\" exact component={App} />\r\n            <Route path=\"/login\" component={Login} />\r\n            <Route path=\"/register\" component={Register} />\r\n            <Route path=\"/cart\" component={Cart} />\r\n            <Route component={NotFound} />\r\n        </Switch>\r\n    </BrowserRouter>\r\n)\r\n\r\nexport default Router;","import * as actionType from \"./actionType\";\r\n\r\nconst defaultState = {\r\n    list: [],\r\n    inputValue: '',\r\n    filterList:[],\r\n    isPopupShow:false,\r\n    isEdit:false,\r\n    currentEditItem:{},\r\n    cartList:[],\r\n    nickName:'admin'\r\n}\r\n\r\nexport default (state = defaultState, action) => {\r\n\r\n    // 產品列表\r\n    if(action.type === actionType.INIT_LIST_ACTION ){\r\n        const newState = JSON.parse(JSON.stringify(state))\r\n        newState.list = action.data;\r\n        newState.filterList = action.data;\r\n        return newState;\r\n    }\r\n\r\n    // 改變搜索文字\r\n    if(action.type === actionType.CHANGE_INPUT_VALUE ){\r\n        const newState = JSON.parse(JSON.stringify(state))\r\n        newState.inputValue = action.data\r\n        return newState;\r\n    }\r\n\r\n    // 商品搜尋\r\n    if(action.type === actionType.SEARCH_PRODUCT ){\r\n        const newState = JSON.parse(JSON.stringify(state))\r\n\r\n        newState.filterList = newState.list.filter(item =>{\r\n            if(item.name.match(newState.inputValue)){\r\n                return item;\r\n            }\r\n            return false;\r\n        })  \r\n        return newState;\r\n       \r\n    }\r\n\r\n    // 開啟彈出框\r\n    if(action.type === actionType.OPEN_POPUP ){\r\n        const newState = JSON.parse(JSON.stringify(state))\r\n        if(action.payload.isEdit){\r\n            newState.isEdit = true;\r\n            newState.currentEditItem = action.payload.ItemData\r\n           \r\n        }else{\r\n            newState.isEdit = false;\r\n        }\r\n        newState.isPopupShow = true\r\n        return newState;\r\n    }\r\n\r\n    // 關閉彈出框\r\n    if(action.type === actionType.CLOSE_POPUP ){\r\n        const newState = JSON.parse(JSON.stringify(state))\r\n        newState.isPopupShow = false\r\n        return newState;\r\n    }\r\n\r\n    // 修改資料\r\n    if(action.type === actionType.CHANGE_EDIT_BOOK_FILE){\r\n        const newState = JSON.parse(JSON.stringify(state))\r\n        newState.currentEditItem[action.payload.name] = action.payload.value\r\n        return newState;\r\n    }\r\n\r\n    // 獲取購物車清單\r\n    if(action.type === actionType.GET_CART_LIST){\r\n        const newState = JSON.parse(JSON.stringify(state))\r\n        newState.cartList = action.data\r\n        return newState;\r\n    }\r\n\r\n    // 加入購物車\r\n    if(action.type === actionType.ADD_CART_ITEM){\r\n        const newState = JSON.parse(JSON.stringify(state))\r\n        newState.cartList.push(action.item)\r\n        return newState;\r\n    }\r\n\r\n    return state;\r\n}","import {createStore,applyMiddleware,compose } from 'redux';\r\nimport thunk from 'redux-thunk';\r\nimport reducers from './reducers';\r\n\r\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ ? window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({}) : compose;\r\nconst enhancer = composeEnhancers(applyMiddleware(thunk));\r\nconst store = createStore(reducers, enhancer);\r\nexport default store;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport {Provider} from 'react-redux'\nimport { ToastContainer} from 'react-toastify';\nimport './commons/auth'\nimport Router from './Router'\nimport store from './store'\n\n// 引入CSS\nimport 'react-toastify/dist/ReactToastify.css';\nimport './css/app.scss';\nimport './css/style.scss';\n\nconst app=(\n    <Provider store={store}>\n        <ToastContainer\n            position=\"top-right\"\n            autoClose={3000}\n            hideProgressBar={false}\n            newestOnTop={false}\n            closeOnClick\n            rtl={false}\n            pauseOnVisibilityChange/>\n        <Router/>\n    </Provider>\n)\n\n\nReactDOM.render(app, document.getElementById('root'));\n\n"],"sourceRoot":""}